{% extends "::layout.html.twig" %}
{% block css %}
    {{ parent() }}
{% endblock %}
{% block title %}
    {% trans %}  Ajouter un chantier{% endtrans %} - {{ parent() }}
{% endblock %}
{% block jshead %}
{{ parent() }}
{% endblock %}
{% block body %}
    <div id="page_heading" data-uk-sticky="{ top: 48, media: 960 }">
        <h1> {% trans %}Formulaire d'ajout du chantier {% endtrans %}</h1>
        <span class="uk-text-muted uk-text-upper uk-text-small"> {% trans %}
            veuillez bien remplir les champs {% endtrans %}</span>
    </div>
    {{ include("SBCPlatformBundle:Chantier:form.html.twig") }}
{% endblock %}
{% block js %}
    {{ parent() }}
    <script>
        altair_forms.parsley_validation_config();
    </script>
    {% javascripts output="js/compiled/mainValidation.js"
    'bundles/sbcplatform/bower_components/parsleyjs/dist/parsley.min.js'
    'bundles/sbcplatform/assets/js/pages/forms_validation.min.js' %}
    <script src="{{ asset_url }}"></script>
    {% endjavascripts %}
    <script>
        $(function () {
            if (document.getElementById('sbcplatformbundle_chantier_status_0').checked) {
                $('#divbegindate').hide();
                $("#sbcplatformbundle_chantier_begindate").prop('required', false);
                $('#divfinishdate').hide();
                $("#sbcplatformbundle_chantier_finishdate").prop('required', false);
            } else if (document.getElementById('sbcplatformbundle_chantier_status_1').checked) {
                $('#divbegindate').show();
                $("#sbcplatformbundle_chantier_begindate").prop('required', true);
                $('#divfinishdate').hide();
                $("#sbcplatformbundle_chantier_finishdate").prop('required', false);
            } else if (document.getElementById('sbcplatformbundle_chantier_status_2').checked) {
                $('#divbegindate').show();
                $("#sbcplatformbundle_chantier_begindate").prop('required', true);
                $('#divfinishdate').show();
                $("#sbcplatformbundle_chantier_finishdate").prop('required', true);
            } else {
                $('#divbegindate').hide();
                $("#sbcplatformbundle_chantier_begindate").prop('required', false);
                $('#divfinishdate').hide();
                $("#sbcplatformbundle_chantier_finishdate").prop('required', false);
            }
        });
        function hide0() {
            if (document.getElementById('sbcplatformbundle_chantier_status_0').checked) {
                $('#divbegindate').hide();
                $("#sbcplatformbundle_chantier_begindate").prop('required', false);
                $('#divfinishdate').hide();
                $("#sbcplatformbundle_chantier_finishdate").prop('required', false);
            } else {
                console.log("0");
            }
        }
        function hide1() {
            if (document.getElementById('sbcplatformbundle_chantier_status_1').checked) {
                $('#divbegindate').show();
                $("#sbcplatformbundle_chantier_begindate").prop('required', true);
                $('#divfinishdate').hide();
                $("#sbcplatformbundle_chantier_finishdate").prop('required', false);
            } else {
                console.log("1");
            }
        }
        function hide2() {
            if (document.getElementById('sbcplatformbundle_chantier_status_2').checked) {
                $('#divbegindate').show();
                $("#sbcplatformbundle_chantier_begindate").prop('required', true);
                $('#divfinishdate').show();
                $("#sbcplatformbundle_chantier_finishdate").prop('required', true);
            } else {
                console.log("2");
            }
        }
        $("#sbcplatformbundle_chantier_status_0").on("ifChanged", hide0);
        $("#sbcplatformbundle_chantier_status_1").on("ifChanged", hide1);
        $("#sbcplatformbundle_chantier_status_2").on("ifChanged", hide2);


        //        $( "#sbcplatformbundle_chantier_finishdate" ).change(function() {
        //
        //
        //            if($('#sbcplatformbundle_chantier_finishdate').val() < $('#sbcplatformbundle_chantier_begindate').val() ){
        //                console.log('heree');
        //               // $('#sbcplatformbundle_chantier_finishdate').add("<div class='parsley-errors-list filled' id='parsley-id-18'><span class='parsley-required'>This value is required.</span></div>");
        //
        //
        //                alert('date de fin doit être supérieure à la date de début');
        //                //$('#sbcplatformbundle_chantier_finishdate').empty();
        //            }
        //
        //        });
    </script>
{% endblock %} 